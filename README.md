global and variable management inspired by https://github.com/jschuh/klipper-macros